function _iniciar(){"use strict";$.Admin.flash={opciones:{timeout:2e4,position:"topRight",message:""},iniciar:function(){},info:function(e){var o=this;e&&(o.opciones.message=e,iziToast.info(o.opciones))},error:function(e){var o=this;e&&(o.opciones.message=e,iziToast.error(o.opciones))}},$.Admin.flatpickr={opciones:{dateFormat:"d/m/Y",locale:{firstDayOfWeek:1,weekdays:{shorthand:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],longhand:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},months:{shorthand:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Оct","Nov","Dic"],longhand:["Enero","Febreo","Мarzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}},inline:!1},iniciar:function(){var e=this;$(".fechahora").length&&(e.opciones.dateFormat="d-m-Y H:i",e.opciones.enableTime=!0,$(".fechahora").flatpickr(e.opciones)),$(".fechas").length&&(e.opciones.dateFormat="d-m-Y",$(".fechas").flatpickr(e.opciones)),$(".horas").length&&(e.opciones.dateFormat="H:i",e.opciones.enableTime=!0,e.opciones.noCalendar=!0,$(".horas").flatpickr(e.opciones))},reiniciar:function(){if($('[data-toggle="datetimepicker"]').length){var e=this;$('[data-toggle="datetimepicker"]').datetimepicker("destroy"),e.iniciar()}}},$.Admin.gmaps={input:null,autocomplete:null,geocoder:null,boton:null,event:null,marker:null,map:null,iniciar:function(){var e=this;$("#ubicacion-gmaps").length&&(e.input=document.getElementById("ubicacion-gmaps"),this.autocompletado()),$("#mapa").length&&(e.input=document.getElementById("ubicacion-gmaps"),e.div=document.getElementById("mapa"),this.mapa())},autocompletado:function(){try{var e=this;if(!e.input)throw new Error("No se encontró el input para la función de autocompletado.");e.autocomplete=new google.maps.places.Autocomplete(e.input,{types:["geocode"]}),e.autocomplete.setFields(["geometry"]),e.autocomplete.addListener("place_changed",function(){setTimeout(()=>{let o=e.autocomplete.getPlace();if(o.geometry&&($("#lat").val(o.geometry.location.lat()),$("#lng").val(o.geometry.location.lng())),o.address_components){var t=o.address_components,a={};jQuery.each(t,function(e,o){jQuery.each(o.types,function(e,t){a[t]=o.long_name})}),$("#street_name").val(a.route),$("#street_number").val(a.street_number),$("#country").val(a.country),$("#province").val(a.administrative_area_level_1),a.locality?$("#city").val(a.locality):a.sublocality?$("#city").val(a.sublocality):$("#city").val(a.administrative_area_level_2),$("#zipcode").val(a.postal_code)}},600)})}catch(e){console.log(e)}},mapa:function(){try{var e=this;if(!e.input)throw new Error("No se encontró el input para la función de autocompletado.");if(!e.div)throw new Error("No se encontró el div para el renderizado del mapa.");""!=e.input.value&&(e.event=new Event("change"),e.input.dispatchEvent(e.event));let t=-32.9596572,a=-60.646229;$("#lat").val()&&$("#lng").val()&&(t=$("#lat").val(),a=$("#lng").val());var o=new google.maps.LatLng(t,a);$("#lat").val(t),$("#lng").val(a),e.map=new google.maps.Map(e.div,{zoom:15,center:o}),e.marker=new google.maps.Marker({position:o,title:"Dirección",map:e.map,draggable:!0}),e.geocoder=new google.maps.Geocoder,google.maps.event.addListener(e.marker,"drag",function(){$("#lat").val(e.marker.getPosition().lat()),$("#lng").val(e.marker.getPosition().lng())}),google.maps.event.addListener(e.marker,"dragend",function(){var o={lat:parseFloat(e.marker.getPosition().lat()),lng:parseFloat(e.marker.getPosition().lng())};e.geocoder.geocode({location:o},function(o,t){if("OK"===t)if(o[1]){var a=o[0].address_components,n={};jQuery.each(a,function(e,o){jQuery.each(o.types,function(e,t){n[t]=o.long_name})}),$("#street_name").val(n.route),$("#street_number").val(n.street_number),$("#country").val(n.country),$("#province").val(n.administrative_area_level_1),n.locality?$("#city").val(n.locality):n.sublocality?$("#city").val(n.sublocality):$("#city").val(n.administrative_area_level_2),$("#zipcode").val(n.postal_code),$("#lat").val(o[0].geometry.location.lat()),$("#lng").val(o[0].geometry.location.lng()),$("#title").val(n.route+" "+e.redondear(n.street_number))}else _d("No results found");else _d("Geocoder failed due to: "+t)})}),e.autocomplete=new google.maps.places.Autocomplete(e.input),e.autocomplete.bindTo("bounds",e.map),e.autocomplete.addListener("place_changed",function(){e.marker.setVisible(!1);var o=e.autocomplete.getPlace();o.geometry?(o.geometry.viewport?e.map.fitBounds(o.geometry.viewport):(e.map.setCenter(o.geometry.location),e.map.setZoom(17)),e.marker.setIcon({url:o.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}),e.marker.setPosition(o.geometry.location),e.marker.setVisible(!0),setTimeout(()=>{let o=e.autocomplete.getPlace();if(o.geometry&&($("#lat").val(o.geometry.location.lat()),$("#lng").val(o.geometry.location.lng())),o.address_components){var t=o.address_components,a={};jQuery.each(t,function(e,o){jQuery.each(o.types,function(e,t){a[t]=o.long_name})}),$("#street_name").val(a.route),$("#street_number").val(a.street_number),$("#country").val(a.country),$("#province").val(a.administrative_area_level_1),a.locality?$("#city").val(a.locality):a.sublocality?$("#city").val(a.sublocality):$("#city").val(a.administrative_area_level_2),$("#zipcode").val(a.postal_code)}},600)):_d("No existe lugar para esa búsqueda")})}catch(e){console.log(e)}},mapa_estatico:function(){try{var e=this;if(!e.div)throw new Error("No se encontró el div para el renderizado del mapa.");if(!parseFloat(e.div.dataset.lat))throw new Error("La latitud esta mal");if(!parseFloat(e.div.dataset.lng))throw new Error("La longitud esta mal");let o=e.div.dataset.title||"Dirección";const t={lat:parseFloat(e.div.dataset.lat),lng:parseFloat(e.div.dataset.lng)},a=new google.maps.Map(e.div,{zoom:15,center:t}),n="<p>"+o+"</p>",i=new google.maps.InfoWindow({content:n}),r=new google.maps.Marker({position:t,map:a,title:o});r.addListener("click",()=>{i.open(a,r)})}catch(e){console.log(e)}}},$.Admin.select2={elementos:[],historico:!1,opciones:{language:"es",placeholder:"",allowClear:!0,dropdownParent:null,miembro_email:""},iniciar:function(){var e=this;$(".select2").length&&$(".select2").each(function(o,t){let a=$(t),n=Object.create(e.opciones);if(a.hasClass("select2-usuarios")){var i=a.data("rol");n.ajax={url:HOST+"admin/api/getUsuarios",dataType:"json",delay:250,data:function(e){return{rol:i||"",search:e.term,page:e.page||1}},processResults:function(e,o){return o.page=o.page||1,{results:e.items,pagination:{more:25*o.page<e.total_count}}},cache:!0},n.escapeMarkup=function(e){return e},n.minimumInputLength=3,n.templateResult=e.formatResultado,n.templateSelection=e.formatResultadoSelection}a.data("dropdownparent")&&(n.dropdownParent=$(a.data("dropdownparent"))),a.data("placeholder")&&(n.placeholder=a.data("placeholder")),e.elementos.push(t),a.select2(n)})},reiniciar:function(){var e=this;$(".select2").length&&e.elementos.forEach(function(o){$(o).select2("destroy"),$(o).val(null),e.iniciar()})},formatResultadoSelection:function(e){return e.text||"Selecciona una opción"},formatResultado:function(e){return e.loading?e.text:"<span>"+e.text+"</span>"}},$.Admin.summernote={iniciar:function(){$(".summernote-disabled").length&&$(".summernote-disabled").summernote("disable")}},$.Admin.sidebar={iniciar:function(){var e=$.Admin.opciones;e.controlAccion=e.controlador+e.accion;var o=$(".sidebar-menu").find("."+e.controlAccion);if(o.length)o.addClass("active"),this._padres(o);else{o=$(".sidebar-menu").find("."+e.controlador);o.length&&(o.addClass("active"),this._padres(o))}},_padres:function(e){let o=e.parents("ul");o.length&&o.each((e,o)=>{$(o).hasClass("dropdown-menu")&&$(o).css("display","block")});let t=e.parents("li");t.length&&t.each((e,o)=>{$(o).hasClass("dropdown")&&$(o).addClass("active")})}},$.Admin.password={selector:$(".pwstrength"),iniciar:function(){var e=this;e.selector.length&&e.selector.pwstrength({texts:["muy débil","débil","mediocre","fuerte","muy fuerte"]})}},$.Admin.Unidades={iniciar:function(){var e=this;$("#marca_id").on("change",function(){e.buscarModelos()}),$("#num_interno").on("change",function(){var e=$("#num_interno").val(),o=5,t=e.padStart(o,"0");$("#num_interno").val(t)})},buscarModelos:function(){console.log("hola");if($("#marca_id").length){console.log("marca id:",$("#marca_id").val());var e=$("#marca_id").val();$.ajax({type:"GET",url:HOST+"/api/marcas/"+e,data:{},dataType:"json",success:e=>{console.log("modelos:",e),e&&($("#modelo_id option[value]").each(function(){$(this).remove()}),$("#modelo_id").append($("<option>",{value:"",text:"Seleccione un contacto"})),$.each(e,function(e,o){$("#modelo_id").append($("<option>",{value:o.id,text:o.nombre}))}))},error:e=>{console.log("Hay error")}})}}}}function _d(e,o){$.Admin.opciones.debug&&(m=e,(o||0===o||!1===o)&&(m=m+" : "+o),console.log(m))}function verImagen(e){var o=window.open();o.document.open(),o.document.write('<img src="'+e+'">'),o.document.close()}function isEmpty(e){return!e||(null==e||(null==e||(void 0===e||(void 0===e||(""===e||(" "===e||(0==e.length||!e.length)))))))}function validarForm(e){if(e){for(var o of e){let e=$(o);if(e.attr("required")&&!e.attr("disabled")&&!e.val()){let o=e.attr("title");return $.Master.flash.error("Debe completar el campo "+o),e.focus(),!1}}return!0}return!1}function copiar(e){if(document.queryCommandSupported("copy")){var o=document.createElement("input");o.setAttribute("value",e),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),mensaje("Copiado!.")}else alert("Su navegador no tiene soporte para copiar.")}function mensaje(e){iziToast.info({title:"Mensaje del sistema",message:e})}if("undefined"==typeof jQuery)throw new Error("necesita jQuery");$.Admin={},$.Admin.opciones={debug:!0,izi:{timeout:2e4,position:"topRight"}},"undefined"!=typeof AdminOpciones&&$.extend(!0,$.Admin.opciones,AdminOpciones),_iniciar(),$(window).on("load",function(){"use strict";$.Admin.flash.iniciar(),$.Admin.select2.iniciar(),$.Admin.summernote.iniciar(),$.Admin.flatpickr.iniciar(),$.Admin.password.iniciar(),$.Admin.gmaps.iniciar(),$.Admin.Unidades.iniciar(),$(".input").hasClass("error")&&($(".error").parent().parent().addClass("has-error"),$(".error-message").css("color","#dd4b39"))}),$(document).ready(function(){$.Admin.sidebar.iniciar()}),$(document).on("scroll",function(e){}),$(window).on("resize",function(e){});